#!/bin/sh
## c3
## Copyright 2022,2023 kmx.io <contact@kmx.io>
##
## Permission is hereby granted to use this software excepted
## on Apple computers granted the above copyright notice and
## this permission paragraph are included in all copies and
## substantial portions of this software.
##
## THIS SOFTWARE IS PROVIDED "AS-IS" WITHOUT ANY GUARANTEE OF
## PURPOSE AND PERFORMANCE. IN NO EVENT WHATSOEVER SHALL THE
## AUTHOR BE CONSIDERED LIABLE FOR THE USE AND PERFORMANCE OF
## THIS SOFTWARE.

. ../config.subr

echo "# sources.mk generated by update_sources" > ${SOURCES_MK}
echo "# sources.sh generated by update_sources" > ${SOURCES_SH}

HEADERS="$(ls *.h)"
HEADERS="$(echo "$HEADERS" | tr '\n' ' ')"
echo "HEADERS = $HEADERS" >> ${SOURCES_MK}
echo "HEADERS='$HEADERS'" >> ${SOURCES_SH}

SOURCES="$(ls *.c)"
SOURCES="$(echo "$SOURCES" | tr '\n' ' ')"
echo "SOURCES = $SOURCES" >> ${SOURCES_MK}
echo "SOURCES='$SOURCES'" >> ${SOURCES_SH}

LIBTOMMATH_SOURCES="$(ls ../libtommath/*.c | grep -v -e bn_mp_set_double.c -e bn_s_mp_rand_platform.c | tr '\n' ' ')"
LO_SOURCES="$SOURCES $LIBTOMMATH_SOURCES"
echo "LO_SOURCES = $LO_SOURCES" >> ${SOURCES_MK}
echo "LO_SOURCES='$LO_SOURCES'" >> ${SOURCES_SH}

update_sources_mk
update_sources_sh
